{"version":3,"sources":["../../../../components/admin/KanbanBoard.tsx/__nextjs-internal-proxy.mjs","../../../../components/ui/badge.tsx","../../../../app/%5Blocale%5D/agent/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const KanbanBoard = registerClientReference(\n    function() { throw new Error(\"Attempted to call KanbanBoard() from the server but KanbanBoard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/admin/KanbanBoard.tsx\",\n    \"KanbanBoard\",\n);\n","import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n    \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n    {\n        variants: {\n            variant: {\n                default:\n                    \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n                secondary:\n                    \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n                destructive:\n                    \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n                outline: \"text-foreground\",\n            },\n        },\n        defaultVariants: {\n            variant: \"default\",\n        },\n    }\n)\n\nexport interface BadgeProps\n    extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> { }\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n    return (\n        <div className={cn(badgeVariants({ variant }), className)} {...props} />\n    )\n}\n\nexport { Badge, badgeVariants }\n","import { createServerClient, type CookieOptions } from \"@supabase/ssr\";\nimport { cookies } from \"next/headers\";\nimport { KanbanBoard } from \"@/components/admin/KanbanBoard\";\nimport { Badge } from \"@/components/ui/badge\";\n\nexport default async function AgentDashboard() {\n    const cookieStore = await cookies();\n\n    // 1. Get User (Supports Dev Mode)\n    const { getCurrentUser } = await import(\"@/lib/auth/current-user\");\n    const { data: { user } } = await getCurrentUser();\n\n    if (!user) {\n        return <div className=\"text-red-500 p-8\">Unauthorized</div>;\n    }\n\n    // Determine Client Key (Service Role for Dev, Anon for Prod)\n    const isDevUser = user.id.startsWith('00000000-0000-0000-0000-0000000000');\n    const supabaseKey = isDevUser\n        ? process.env.SUPABASE_SERVICE_ROLE_KEY!\n        : process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\n    const supabase = createServerClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        supabaseKey,\n        {\n            cookies: {\n                get(name: string) { return cookieStore.get(name)?.value; },\n                set(name: string, value: string, options: CookieOptions) { cookieStore.set({ name, value, ...options }); },\n                remove(name: string, options: CookieOptions) { cookieStore.set({ name, value: \"\", ...options }); },\n            },\n        }\n    );\n\n    // Fetch applications assigned to agent (or all for now, as assignment logic isn't defined)\n    // For this step, we'll just show all applications but in a limited view if needed.\n    // Ideally, we'd filter by `data.access_level` or similar if RLS enforced it.\n    // For now, let's assume Agents see the same Kanban but maybe can't delete?\n    const { data: applications, error } = await supabase\n        .from(\"applications\")\n        .select(`\n            *,\n            profiles (\n                email,\n                first_name,\n                last_name\n            )\n        `)\n        .order(\"created_at\", { ascending: false });\n\n    if (error) {\n        return <div className=\"text-red-500 p-8\">Error loading applications: {error.message}</div>;\n    }\n\n    return (\n        <div className=\"h-[calc(100vh-64px)] flex flex-col p-6 bg-gray-50 overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Agent Portal</h1>\n                    <p className=\"text-sm text-gray-500\">Manage client applications and DS-160 registrations</p>\n                </div>\n                <div className=\"flex gap-2\">\n                    <Badge variant=\"outline\" className=\"bg-white\">\n                        Queue: {applications?.length || 0}\n                    </Badge>\n                    <Badge className=\"bg-indigo-600\">Agent Mode</Badge>\n                </div>\n            </div>\n\n            <div className=\"flex-1 space-y-8 pb-10\">\n                <KanbanBoard applications={applications || []} />\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}